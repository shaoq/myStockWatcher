## Context

当前趋势图对话框（StockChart 组件）只展示技术面数据（分时图、K线图），用户无法同时查看基本面估值指标。

后端已有 `/stocks/{symbol}/valuation` API，返回 PE/PB/ROE 等估值数据，支持 A 股（AKShare）和美股（OpenBB）。

## Goals / Non-Goals

**Goals:**
- 在趋势图对话框顶部展示核心估值指标（5个关键指标）
- 新增"估值详情"Tab 展示完整估值数据（分组展示）
- 复用现有后端 API，前端只需封装调用
- 错误状态友好展示

**Non-Goals:**
- 不修改后端估值 API
- 不添加估值数据缓存（后端已有1小时缓存）
- 不支持估值数据编辑

## Decisions

### 1. UI 布局：混合方案（顶部卡片 + 详情Tab）

**选择理由：**
- 顶部卡片：核心指标一目了然，看图时同时看到 PE/PB/ROE
- 详情 Tab：完整数据按需查看，不挤占趋势图空间

**替代方案：**
- 方案A（仅顶部卡片）：空间有限，无法展示所有指标
- 方案B（仅Tab）：需要切换才能看到核心指标，不够便捷

### 2. 数据加载时机：Modal 打开时立即加载

**选择理由：**
- 估值数据是核心信息，应尽早展示
- 后端有缓存，响应速度快
- 与趋势图数据并行加载，不增加等待时间

### 3. 核心指标选择（5个）

| 指标 | 说明 | 优先级 |
|------|------|--------|
| PE | 市盈率 | 核心 |
| PB | 市净率 | 核心 |
| ROE | 净资产收益率 | 核心 |
| 净利润率 | 盈利能力 | 重要 |
| 营收增长率 | 成长性 | 重要 |

## Risks / Trade-offs

- **美股估值数据可能不可用** → AKShare 不支持美股估值，OpenBB 需要额外配置
  - 缓解：显示"估值数据获取失败"友好提示
- **估值数据延迟** → 后端1小时缓存，可能不是最新
  - 缓解：显示数据获取时间，用户可判断时效性
- **Modal 内容过多** → 估值卡片 + Tab 可能导致界面拥挤
  - 缓解：核心指标精简为5个，详情按需展开
